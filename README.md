# Skywall

Client-Server based manager for connecting systems together and running tasks.

## About

We want create system for handling various tasks on systems automatically. As a example we can use firewalls. On each server will be running client sending information to server where we have iptables module which is connecting servers together based in groups defined on server side. When new client is connected it will get set of rules (predefined + dynamic) Dynamic rules are generated by IP's of servers in groups ( you can generate rules based on all servers in groups).

# Client side:
* binary daemon connecting over web socket to server
* accepting commands from server
* authorize with server based on token
* sending basic information about system (os, ips, interfaces, uptime...)

# Server side:
## Core:
* Care about authentication
* Registration clients
* Collecting information about clients
* Sending commands to clients
* Monitoring connected / disconnected clients

## Modules
* Modules will be called by core
* Various modules can be push on selected clients
* Iptables module
* Predefined rules (hard-coded set of rules which will be same for all systems)
* Dynamic rules (connecting together servers based on their IP's and groups

# Instructions for developers
## Installation

To run Skywall you need Python 3 (tested on 3.5.2) and [python virtualenv](https://pypi.python.org/pypi/virtualenv) (Ubuntu package `virtualenv`).

```
$ git clone git@github.com:SkyPicker/Skywall.git skywall
$ cd skywall
$ virtualenv --python=/usr/bin/python3 env
$ ./env/bin/pip install -r requirements.txt
```

## Configuration

To see the current configuration run:

```
$ ./env/bin/python skywall.py get
```

To see available settings run:

```
$ ./env/bin/python skywall.py set --help
```

### Server host and port

By default the server listens on localhost on port 9000. To configure custom server host and port
run:

```
$ ./env/bin/python skywall.py set --server.host HOST --server.port PORT
```

If the server is behind a proxy or the public websocket url of the server is different than the
server host and port for some reason, you may need to configure public websocket url as well:

```
$ ./env/bin/python skywall.py set --server.publicUrl URL
```

### Database

By default the server uses sqlite database stored in local file `data.db`. To use another database
you need to configure its connection string. For instance to use PostgreSQL run:

```
$ ./env/bin/python skywall.py set --server.database 'postgresql://USER:PASS@HOST/DATABASE'
```

## Running server

```
$ ./env/bin/python skywall.py server
```

## Running client

```
$ ./env/bin/python skywall.py client
```
